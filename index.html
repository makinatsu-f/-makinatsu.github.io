<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>ãƒã‚­ãƒŠãƒ„â˜…ãƒãƒƒã‚°Ã—ã‚¢ãƒƒãƒ—ãƒªã‚±ã‚²ãƒ¼ãƒ </title>
  <style>
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Hiragino Sans", sans-serif;
      background: #f5eee8;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    h1 {
      font-size: 20px;
      margin: 16px 8px 4px;
      text-align: center;
    }

    p {
      margin: 0 0 12px;
      font-size: 13px;
      text-align: center;
      color: #555;
    }

   
.workspace {
  position: relative;
  width: 70vw;        /* â† ç”»é¢ã«å¯¾ã—ã¦7å‰²ã®å¹… */
  max-width: 780px;   /* â† PCã§ã‚‚å¤§ãã™ããªã„ */
  aspect-ratio: 3 / 2; 
  background: #E2C9A3;
  box-shadow: 0px 8px 8px rgba(0,0,0,0.18);
  border-radius: 16px;
  margin-bottom: 12px;
  overflow: hidden;
}

.bag {
  position: absolute;
  left: 50%;
  bottom: 8%;
  transform: translateX(-50%);
  width: 70%;      /* ã“ã“ã‚’ 25ã€œ40% ã§å¾®èª¿æ•´ */
  height: auto;
  object-fit: contain;
  pointer-events: none;
}



    /* ã‚¢ãƒƒãƒ—ãƒªã‚±ï¼ˆãƒ‰ãƒ©ãƒƒã‚°å¯èƒ½ï¼‰ */
    .applique {
      position: absolute;
      width: 30%;
      max-width: 260px;
      cursor: grab;
      touch-action: none;   /* ã‚¹ãƒãƒ›ã§ã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’æŠ‘ãˆã‚‹ */
      user-select: none;
    }
  

    .applique.dragging {
      opacity: 0.85;
      cursor: grabbing;
      transform: scale(1.03);
    }

    /* ä¸‹ã®é¸æŠãƒ‘ãƒãƒ« */
    .panel {
      width: 90vw;
      max-width: 900px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-bottom: 24px;
    }

    .panel-section-title {
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .panel-row {
      display: flex;
      gap: 8px;
      overflow-x: auto;
      padding: 6px;
      border-radius: 10px;
      background: #fff;
      box-shadow: 0 3px 8px rgba(0,0,0,0.08);
    }

    .choice {
      flex: 0 0 auto;
      border-radius: 10px;
      padding: 4px;
      border: 2px solid transparent;
      background: #f7f5f2;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      min-width: 72px;
      min-height: 48px;
    }

    .choice img {
      max-width: 80px;
      max-height: 50px;
      object-fit: contain;
      display: block;
    }

    .choice.active {
      border-color: #ff8a3c;
      box-shadow: 0 0 0 2px rgba(255,138,60,0.35);
    }

    .btn-row {
      display: flex;
      justify-content: flex-end;
      gap: 8px;
      margin-top: 4px;
    }

    button {
      border-radius: 999px;
      border: none;
      padding: 6px 14px;
      font-size: 12px;
      background: #ff8a3c;
      color: #fff;
      cursor: pointer;
      box-shadow: 0 2px 6px rgba(0,0,0,0.16);
    }

    button.secondary {
      background: #999;
    }

    button:active {
      transform: translateY(1px);
      box-shadow: 0 1px 3px rgba(0,0,0,0.18);
    }
    /* ã‚¹ãƒãƒ›ç”¨ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆèª¿æ•´ */
@media (max-width: 768px) {
  .options {
    display: flex;
    flex-wrap: wrap;
    gap: 14px;
    justify-content: space-between;
  }

  .option-item {
    flex: 1 1 calc(20% - 8px);  /* 5åˆ—ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆèª¿æ•´ */
    max-width: 70px;            /* æœ€å¤§å¹… */
    height: 70px;               /* é«˜ã• */
  }

  .option-item img {
    width: 100%;
    height: 100%;
    object-fit: contain;
  }
}

  </style>
</head>
<body>
  <h1>ãƒã‚­ãƒŠãƒ„â˜…ãƒãƒƒã‚° Ã— ã‚¢ãƒƒãƒ—ãƒªã‚±ã‚ãã³</h1>
  <p>ä¸‹ã®ãƒãƒƒã‚°ã¨ã‚¢ãƒƒãƒ—ãƒªã‚±ã‚’é¸ã‚“ã§ã€ä½œæ¥­æœºã®ã†ãˆã§ãƒ‰ãƒ©ãƒƒã‚°ã—ã¦éŠã‚“ã§ã­ğŸ§µ</p>

  <!-- ä½œæ¥­æœºã‚¨ãƒªã‚¢ -->
  <div class="workspace" id="workspace">
    <!-- é¸æŠã•ã‚ŒãŸãƒãƒƒã‚° -->
    <img id="bagImage" class="bag"
      src="images/bag_red.png" alt="bag" />

    <!-- ã“ã“ã«é¸ã‚“ã ã‚¢ãƒƒãƒ—ãƒªã‚±ãŒè¿½åŠ ã•ã‚Œã¦ã„ã -->
  </div>

  <!-- ãƒãƒƒã‚°ãƒ»ã‚¢ãƒƒãƒ—ãƒªã‚±é¸æŠãƒ‘ãƒãƒ« -->
  <div class="panel">
    <div>
      <div class="panel-section-title">ğŸ’ ãƒãƒƒã‚°ã‚’ãˆã‚‰ã¶</div>
      <div class="panel-row" id="bagChoices">
        <!-- ã“ã“ã«JSã‹ã‚‰ãƒãƒƒã‚°å€™è£œã‚’ä¸¦ã¹ã‚‹ -->
      </div>
    </div>

    <div>
      <div class="panel-section-title">ğŸ¦– ã‚¢ãƒƒãƒ—ãƒªã‚±ã‚’ç½®ã</div>
      <div class="panel-row" id="appliqueChoices">
        <!-- ã“ã“ã«JSã‹ã‚‰ã‚¢ãƒƒãƒ—ãƒªã‚±å€™è£œã‚’ä¸¦ã¹ã‚‹ -->
      </div>
      <div class="btn-row">
        <button class="secondary" id="clearBtn">ã‚¢ãƒƒãƒ—ãƒªã‚±ã‚’å…¨éƒ¨æ¶ˆã™</button>
      </div>
    </div>
  </div>

  <script>
    // ç”»åƒãƒªã‚¹ãƒˆï¼ˆâ˜…ã“ã“ã‚’ãƒã‚­ãƒŠãƒ„ã®æœ¬ç‰©ãƒ‘ã‚¹ã«å·®ã—æ›¿ãˆã‚Œã°OKï¼‰
    const bags = [
      { id: "red",    label: "ã‚ã‹",       src: "images/bag_red.png" },
      { id: "green",  label: "ã¿ã©ã‚Š",     src: "images/bag_green.png" },
      { id: "gray",   label: "ã‚°ãƒ¬ãƒ¼",     src: "images/bag_gray.png" },
      { id: "blue",   label: "ãƒ–ãƒ«ãƒ¼",     src: "images/bag_blue.png" },
      { id: "brown",  label: "ã¡ã‚ƒã„ã‚",   src: "images/bag_brown.png" },
    ];

    const appliques = [
      { id: "mosasaurus", label: "ãƒ¢ã‚µã‚µã‚¦ãƒ«ã‚¹ï¼Ÿ", src: "images/applique_mosa.png" },
      { id: "stegosaurus", label: "ã‚¹ãƒ†ã‚´",         src: "images/applique_stego.png" },
      { id: "brachio",     label: "ãƒ–ãƒ©ã‚­ã‚ª",       src: "images/applique_brachio.png" },
      { id: "trex",        label: "ãƒ†ã‚£ãƒ¼ãƒ¬ãƒƒã‚¯ã‚¹", src: "images/applique_trex.png" },
      { id: "spino",       label: "ã‚¹ãƒ”ãƒ",         src: "images/applique_spino.png" },
   { id: "trike", label: "ãƒˆãƒªã‚±ãƒ©ãƒˆãƒ—ã‚¹", src: "images/applique_trike.png" },
 ];

    const bagImage = document.getElementById("bagImage");
    const bagChoices = document.getElementById("bagChoices");
    const appliqueChoices = document.getElementById("appliqueChoices");
    const workspace = document.getElementById("workspace");
    const clearBtn = document.getElementById("clearBtn");

    // ãƒãƒƒã‚°å€™è£œã®è¡¨ç¤º
    bags.forEach((bag, index) => {
      const div = document.createElement("div");
      div.className = "choice" + (index === 0 ? " active" : "");
      div.dataset.id = bag.id;

      const img = document.createElement("img");
      img.src = bag.src;
      img.alt = bag.label;

      div.appendChild(img);
      div.addEventListener("click", () => {
        bagImage.src = bag.src;

        // activeåˆ‡ã‚Šæ›¿ãˆ
        document.querySelectorAll("#bagChoices .choice")
          .forEach(c => c.classList.remove("active"));
        div.classList.add("active");
      });

      bagChoices.appendChild(div);
    });

    // ã‚¢ãƒƒãƒ—ãƒªã‚±å€™è£œã®è¡¨ç¤º
    appliques.forEach(ap => {
      const div = document.createElement("div");
      div.className = "choice";
      const img = document.createElement("img");
      img.src = ap.src;
      img.alt = ap.label;
      div.appendChild(img);

      div.addEventListener("click", () => {
        addAppliqueToWorkspace(ap.src, ap.label);
      });

      appliqueChoices.appendChild(div);
    });

    // ã‚¢ãƒƒãƒ—ãƒªã‚±ã‚’ä½œæ¥­æœºä¸Šã«è¿½åŠ 
    function addAppliqueToWorkspace(src, label) {
      const img = document.createElement("img");
      img.className = "applique";
      img.src = src;
      img.alt = label;

      // åˆæœŸä½ç½®ï¼šä¸­å¤®ã‚ãŸã‚Š
      img.style.left = "40%";
      img.style.top = "35%";

      enableDrag(img);
      workspace.appendChild(img);
    }

    // ãƒ‰ãƒ©ãƒƒã‚°æ©Ÿèƒ½
    function enableDrag(el) {
      let offsetX = 0;
      let offsetY = 0;
      let isDragging = false;

      const start = (clientX, clientY) => {
        const rect = el.getBoundingClientRect();
        offsetX = clientX - rect.left;
        offsetY = clientY - rect.top;
        isDragging = true;
        el.classList.add("dragging");
      };

      const move = (clientX, clientY) => {
        if (!isDragging) return;
        const rect = workspace.getBoundingClientRect();
        const x = clientX - rect.left - offsetX;
        const y = clientY - rect.top - offsetY;
        el.style.left = x + "px";
        el.style.top = y + "px";
      };

      const end = () => {
        isDragging = false;
        el.classList.remove("dragging");
      };

      // ãƒã‚¦ã‚¹
      el.addEventListener("mousedown", (e) => {
        e.preventDefault();
        start(e.clientX, e.clientY);
      });
      window.addEventListener("mousemove", (e) => move(e.clientX, e.clientY));
      window.addEventListener("mouseup", end);

      // ã‚¿ãƒƒãƒ
      el.addEventListener("touchstart", (e) => {
        const t = e.touches[0];
        start(t.clientX, t.clientY);
      }, { passive: false });

      window.addEventListener("touchmove", (e) => {
        if (!isDragging) return;
        const t = e.touches[0];
        move(t.clientX, t.clientY);
      }, { passive: false });

      window.addEventListener("touchend", end);
      window.addEventListener("touchcancel", end);
    }

    // ã‚¢ãƒƒãƒ—ãƒªã‚±å…¨æ¶ˆã—
    clearBtn.addEventListener("click", () => {
      document.querySelectorAll(".applique").forEach(el => el.remove());
    });
  </script>
</body>
</html>

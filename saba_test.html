<!-- test deploy -->
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>サバ1匹テスト</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    * { box-sizing: border-box; }

    body {
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Hiragino Sans", "Yu Gothic", sans-serif;
      background: #003f7f;          /* 海っぽい青 */
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }

    .sea {
      position: relative;
      width: 100%;
      max-width: 480px;
      aspect-ratio: 16 / 9;
      background: linear-gradient(#3fa9f5, #003f7f);
      overflow: hidden;
      border-radius: 16px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    }

   #saba { cursor: pointer; }

      position: absolute;
      top: 50%;          /* 画面の縦中央あたり */
      transform: translateY(-50%);
      height: 80px;      /* サバの大きさ。大きすぎたらここを小さくしてOK */
      pointer-events: auto;

    }
  </style>
</head>
<body>
<div id="scoreBox" 
     style="
        position: absolute;
        top: 10px;
        left: 10px;
        font-size: 24px;
        font-weight: bold;
        color: white;
        z-index: 9999;
     ">
  SCORE: <span id="score">0</span>
</div>
  <div class="sea">
    <!-- ★★ ここがサバの画像 ★★ -->
   <img id="saba" 
     src="images/saba.png" 
     alt="サバ" 
     onclick="catchSaba()" />

  </div>

  <script>
    // 画面の横幅に応じて、サバを左から右へ泳がせるテスト

    const saba = document.getElementById("saba");
    const sea = document.querySelector(".sea");
// ===== 追加：スコアと捕獲処理 =====
// ===== 追加：スコアと捕獲処理 =====
let score = 0;
let caught = false;

const scoreEl = document.getElementById("score");

function catchSaba() {
  if (caught) return;      // 連打防止
  caught = true;

  score += 1;
  if (scoreEl) scoreEl.textContent = score;  // ← span#score には数字だけ入れる

  // サバを一瞬消す（当たり判定も消す）
  saba.style.opacity = "0";
  saba.style.pointerEvents = "none";

  // 0.8秒後に復活
  setTimeout(() => {
    saba.style.opacity = "1";
    saba.style.pointerEvents = "auto";
    caught = false;
  }, 800);
}

}

    // サバの現在位置（左端のpx）
    let sabaX = sea.clientWidth + 150;
      // 最初は画面の左外からスタート
    const speed = 2.5;      // 速さ。大きいほど速い

    function swim() {
      const seaWidth = sea.clientWidth;

      // 位置を右方向に移動
      sabaX -= speed;


      // 画面の右端を出たら左にワープしてくる
     if (sabaX < -150) {
  sabaX = seaWidth + 150;
}


      // 実際に反映
      saba.style.left = sabaX + "px";

      // アニメーションを続ける
      requestAnimationFrame(swim);
    }

    // 画面読み込み後にアニメーション開始
    window.addEventListener("load", () => {
      // スタート地点（左の外）
      sabaX = -150;
      swim();
    });
 // ==== スコア関連 ====
let score = 0;
const scoreDisplay = document.getElementById("score");

// 捕獲処理（タップ／クリックで呼ばれる）
function catchSaba() {
  score++;
  scoreDisplay.textContent = score;

  // 消す（display:none）
  saba.style.display = "none";

  // 少し待ってから復活（テスト用）
  setTimeout(() => {
    saba.style.left = "-150px";
    saba.style.display = "block";
  }, 800);
}
 </script>
</body>
</html>
